# Authentication

All API requests to VoiceGenie require authentication. This guide covers the authentication methods and headers used across the VoiceGenie platform.

## Authentication Methods

### API Key Authentication

VoiceGenie uses API key authentication for all API requests. Include your API key in the `x-api-key` header with every request.

**Header:**
```bash
x-api-key: your-api-key-here
```

**Example Request:**
```bash
curl --request GET \
  --url https://vb-seamless-dev-backend.oriserve.com/api/endpoint \
  --header 'x-api-key: your-api-key-here' \
  --header 'Content-Type: application/json'
```

### Session-Based Authentication

Some endpoints require session-based authentication using cookies for dashboard and web application access.

**Cookie Header:**
```bash
Cookie: token=your_session_token_here
```

## Required Headers

| Header | Value | Description | When Required |
|--------|-------|-------------|---------------|
| `x-api-key` | Your API key | Primary authentication for API requests | All API endpoints |
| `Cookie` | `token=session_token` | Session authentication for dashboard endpoints | Dashboard/web endpoints |
| `Content-Type` | `application/json` or `multipart/form-data` | Request payload format | POST/PUT requests with body |

## Optional Headers

| Header | Example | Description |
|--------|---------|-------------|
| `Origin` | `vb-seamless-dev-backend.oriserve.com` | Request origin for whitelisting |
| `Accept` | `application/json` | Preferred response format |
| `User-Agent` | Browser/client identifier | Client identification |

## Webhook Authentication Headers

For incoming webhooks, VoiceGenie uses signature verification:

| Header | Description | Used In |
|--------|-------------|---------|
| `X-Plivo-Signature-V2` | Plivo webhook signature verification | Plivo webhooks |
| `X-Plivo-Signature-MA-V2` | Additional Plivo signature verification | Plivo webhooks |
| `x-webhook-signature` | Custom webhook signature | AI dialer callbacks |

## Getting Your API Key

1. Log in to your VoiceGenie Dashboard
2. Navigate to **Settings** â†’ **API Keys**
3. Generate a new API key or copy your existing key
4. Store securely in environment variables

## Security Best Practices

- Store API keys in environment variables, never in code
- Use HTTPS for all API requests
- Rotate API keys regularly (recommended: every 90 days)
- Use different keys for development, staging, and production environments
- Implement IP whitelisting when possible
- Monitor API usage for suspicious activity
- Validate webhook signatures for incoming webhooks

## Error Responses

### 401 Unauthorized
Invalid or missing authentication credentials.

```json
{
  "success": false,
  "message": "Invalid or missing API key"
}
```

### 403 Forbidden
Valid credentials but insufficient permissions.

```json
{
  "success": false,
  "message": "API key does not have permission to access this resource"
}
```

### 429 Too Many Requests
Rate limit exceeded.

```json
{
  "success": false,
  "message": "Rate limit exceeded. Please try again later."
}
```

## Rate Limits

API requests are rate-limited per API key:

| Plan | Requests/Minute | Requests/Hour |
|------|-----------------|---------------|
| Free | 60 | 1,000 |
| Basic | 300 | 10,000 |
| Pro | 1,000 | 50,000 |
| Enterprise | Custom | Custom |

Rate limit information is included in response headers:
```bash
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 999
X-RateLimit-Reset: 1699276800
```

## Testing Authentication

### Quick Test with cURL
```bash
curl --request GET \
  --url https://vb-seamless-dev-backend.oriserve.com/fetchCampaignData \
  --header 'x-api-key: your-api-key-here' \
  --header 'Content-Type: application/json' \
  --header 'Origin: vb-seamless-dev-backend.oriserve.com' \
  --verbose
```

### Test with JavaScript
```javascript
const response = await fetch('https://vb-seamless-dev-backend.oriserve.com/fetchCampaignData', {
  method: 'GET',
  headers: {
    'x-api-key': process.env.VOICEGENIE_API_KEY,
    'Content-Type': 'application/json',
    'Origin': 'vb-seamless-dev-backend.oriserve.com'
  }
});

const data = await response.json();
console.log(data);
```

### Test with Python
```python
import requests
import os

headers = {
    'x-api-key': os.environ.get('VOICEGENIE_API_KEY'),
    'Content-Type': 'application/json',
    'Origin': 'vb-seamless-dev-backend.oriserve.com'
}

response = requests.get(
    'https://vb-seamless-dev-backend.oriserve.com/fetchCampaignData',
    headers=headers
)

print(response.json())
```

## Support

For authentication issues or questions:
- Email: support@voicegenie.com
